<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <!-- <meta http-equiv="X-UA-Compatible" content="IE-edge">
    <meta name="viewport" content="width-device-width, initial-scale-1.0"> -->
    <title>Personality Predictor</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/Home.css') }}">
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script> -->
</head>

<body>
    <!-- <script>
        function flashMessage() {
            if ("{{ flash_message }}" == "True") {
            // alert("Duplicate file")
            alert("Duplicate candidate")

            }
        }
    </script> -->

    <header>
        <a class="brand" style="color: white;" >JobSearch</a>
        <nav>
           <ul>
                {% if session['user_role'] == 'admin'%}
                    <li><a href="{{url_for('intro_admin')}}">Introduction</a></li>
                    <li><a href="{{url_for('home')}}">Home</a></li>
                {% else %}
                    <li><a href="{{url_for('intro_student')}}">Introduction</a></li>

                {% endif %}
                <li><a href="{{url_for('upload')}}">Upload</a></li>
           </ul> 
        </nav>
     </header>
    <div id="mainContainer">    
        <div id="sidePanel">
            <!-- <div class="sideHeader">
                <img src="..\static\image\filter.png" alt="filter" style="padding-right: 5px;" height="50"> 
                Filter
            </div> -->
            <form action="." id="filterSection" method="POST"> 
                <div class="filterDiv">
                    <!-- {% if file %}
                        <input type="search" value="{{file}}" name="file" class="myInput" id="fileInput" oninput="myFunction()" placeholder="Search for file.." title="Type in a file">
                    {% else %}
                        <input type="search" name="file" class="myInput" id="fileInput" oninput="myFunction()" placeholder="Search for file.." title="Type in a file">
                    {% endif %} -->
                    {% if name is not none %}
                        <input type="search" value="{{name}}" name="name" class="myInput" id="nameInput" oninput="myFunction()" placeholder="Search for name.." title="Type in a name">
                    {% else %}
                        <input type="search" name="name" class="myInput" id="nameInput" oninput="myFunction()" placeholder="Search for name.." title="Type in a name">
                    {% endif %}
                    {% if field is not none %}
                        <input type="search" value="{{field}}" name="field" class="myInput" id="fieldInput" oninput="myFunction()" placeholder="Search for field.." title="Type in a field">
                    {% else %}
                        <input type="search" name="field" class="myInput" id="fieldInput" oninput="myFunction()" placeholder="Search for field.." title="Type in a field">
                    {% endif %}
                    {% if personality is not none %}
                        <input type="search" value="{{personality}}" name="personality" class="myInput" id="PersonalityInput" onkeyup="myFunction()" placeholder="Search for attitude.." title="Type in a personality">
                    {% else %}
                        <input type="search"  name="personality" class="myInput" id="PersonalityInput" onkeyup="myFunction()" placeholder="Search for attitude.." title="Type in a personality">
                    {% endif %}

                    <p id="CGPALabel" class="font-weight-bold">CGPA</p>
                    <div class="btn-group btn-group-toggle" data-toggle="buttons">
                        {% if cgpa is not none %}
                            {% if cgpa == 'asc' %}
                                <label class="btn btn-primary ">
                                    <input type="radio" value="default" name="cgpa" id="option1" autocomplete="off" > Default
                                </label>
                                <label class="btn btn-primary active">
                                    <input type="radio" value="asc" name="cgpa" id="option2" autocomplete="off" checked > Ascending
                                </label>
                                <label class="btn btn-primary">
                                    <input type="radio" value="desc" name="cgpa" id="option3" autocomplete="off"> Descending
                                </label>
                            {% elif cgpa == 'desc' %}
                                <label class="btn btn-primary ">
                                    <input type="radio" value="default" name="cgpa" id="option1" autocomplete="off" > Default
                                </label>
                                <label class="btn btn-primary ">
                                    <input type="radio" value="asc" name="cgpa" id="option2" autocomplete="off" > Ascending
                                </label>
                                <label class="btn btn-primary active">
                                    <input type="radio" value="desc" name="cgpa" id="option3" autocomplete="off" checked> Descending
                                </label>
                            {% else %}
                                <label class="btn btn-primary active">
                                    <input type="radio" value="default" name="cgpa" id="option1" autocomplete="off" checked > Default
                                </label>
                                <label class="btn btn-primary ">
                                    <input type="radio" value="asc" name="cgpa" id="option2" autocomplete="off" > Ascending
                                </label>
                                <label class="btn btn-primary">
                                    <input type="radio" value="desc" name="cgpa" id="option3" autocomplete="off"> Descending
                                </label>
                            {% endif %}
                        {% else %}
                            <label class="btn btn-primary active">
                                <input type="radio" value="default" name="cgpa" id="option1" autocomplete="off" checked> Default
                            </label>
                            <label class="btn btn-primary ">
                                <input type="radio" value="asc" name="cgpa" id="option2" autocomplete="off" > Ascending
                            </label>
                            <label class="btn btn-primary">
                                <input type="radio" value="desc" name="cgpa" id="option3" autocomplete="off"> Descending
                            </label>
                        {% endif %}

                    </div>
                    <a href="{{url_for('home')}}"><button type="button" id="clearBtn" class="btn btn-secondary">Clear</button></a>
                    <input type="submit" id="searchBtn" value="Search" name="search" class="btn btn-primary"/>
                </div>
            </form>

                <!-- <button type="submit"  class="btn btn-primary">Search</button> -->
        </div>
        <form action="." id="delete" method="POST">
            <div class="deletePanel">
                <input type="submit" onclick="deleteFunction()" id="deleteBtn" value="Delete" name="delete" class="btn btn-primary"/>
                <div class="paging_div">
                    {% if values.has_prev %}
                        <a class="paging btn btn-primary prev" href="{{ url_for('home', page=values.prev_num,field = field,personality = personality,name = name, cgpa = cgpa) }}">Previous</a>
                    {% endif %}
                    {% if values.has_next %}
                        <a class="paging btn btn-primary" href="{{ url_for('home', page=values.next_num,field = field,personality = personality,name = name, cgpa = cgpa) }}">Next</a>
                    {% endif %}
                </div>

                <!-- <button type="submit" onclick="deleteFunction()" id="delete" name="delete" class="btn btn-primary">Delete</button> -->

                <!-- <button type="button" onclick="deleteFunction()" id="delete" name="delete" class="btn btn-primary">Delete</button> -->
            </div>
            

            <div class="scrollit">
                <table class="table table-bordered">
                    <thead>
                      <tr>
                        <th class="th_borderless" scope="col">#</th>
                        <th scope="col">Field</th>
                        <th scope="col">CGPA</th>
                        <th scope="col">Name</th>
                        <th scope="col">Email</th>
                        <th scope="col">Phone</th>
                        <th scope="col">Skill</th>
                        <th scope="col">Education Level</th>
                        <th scope="col">Institute</th>
                        <th scope="col">Certificate</th>
                        <th class="th_borderless" scope="col">Attitude</th>
                      </tr>
                    </thead>
                    <tbody>
                        {% for item in values %}
                        <tr>
                            <td><input class="checkbox" type="checkbox" id={{item._id}} name="checkBox"  value={{item._id}} ></td>

                            <td>{{item.Field}}</td>
                            <td>{{item.CGPA}}</td>
                            <td>{{item.Name}}</td>
                            <td>{{item.Email}}</td>
                            <td>{{item.Phone}}</td>
                            <td>
                                {% if item.Skills %}
                                    {% set SkillArray = (item.Skills).split(',') %}
                                    <ul class="a">
                                        {% for x in SkillArray %}
                                        <li>{{x}}</li>
                                        {% endfor%}
                                    </ul>
                                {% endif %}
                            </td>
                            <td>{{item.Education_Level}}</td>
                            <td>{{item.Education}}</td>
                            <td>
                                {% if item.Has_Certificate %}
                                    <a href="{{url_for('popup2', candidateID = item._id,field = field,personality = personality,name = name, cgpa = cgpa,page=values.page)}}">
                                        <button type="button" class="button" name={{item._id}} value={{item._id}}>
                                            <span class="button__icon">
                                                <img src="..\static\image\certificate.png" class="file" alt="file" style="padding-right: 5px;" height="20"> 
                                            </span> 
                                            <div class="naming"> 

                                                <span class="button__text">Certificate</span> 
                                            </div>
                                        </button>
                                    </a>
                                {% else %}
                                    -
                                {% endif %}

                            <td>
                                <a href="{{url_for('popup', candidateID = item._id,field = field,personality = personality,name = name, cgpa = cgpa,page=values.page)}}">
                                    <button type="button" class="button" name={{item._id}} value={{item._id}}>
                                        <span class="button__icon">
                                            <img src="..\static\image\file.png" class="file" alt="file" style="padding-right: 5px;" height="20"> 
                                        </span> 
                                        <div class="naming"> 

                                            <span class="button__text">File</span> 
                                        </div>
                                    </button>
                                </a>
                            </td>
    
                        </tr>
                        {% endfor%}
                    </tbody>
                </table>
            </div>
            <div class="paging_div bottomPanel">
                {% if values.has_prev %}
                    <a style="margin-right: 0.5em;" class="paging btn btn-primary prev" href="{{ url_for('home', page=values.prev_num,field = field,personality = personality,name = name, cgpa = cgpa) }}">Previous</a>
                {% endif %}
                {% if values.has_next %}
                    <a class="paging btn btn-primary" href="{{ url_for('home', page=values.next_num,field = field,personality = personality,name = name, cgpa = cgpa) }}">Next</a>
                {% endif %}
            </div>
        </form>

    </div>
    {% block modal %}{% endblock %}
    <script src="{{ url_for('static', filename='script/home.js') }}"></script>

</body>
{% block script%}{% endblock %}
</html>
